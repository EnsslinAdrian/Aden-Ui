<div class="auth-page">
  <div class="glow-bg"></div>

  <div class="auth-card fade-in">

    <!-- === STATE 1: FORMULAR === -->
    @if (!emailSent()) {
    <div class="card-content">

      <div class="text-header">
        <app-logo-initial initial="ðŸ”’"></app-logo-initial>
        <h2>Reset password</h2>
        <app-typografie [text]="'Enter your email and we\'ll send you instructions to reset your password.'" size="small" color="grey" align="center"></app-typografie>
      </div>

      <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()">
        <app-auth-inputs type="email" name="email" label="Email" placeholder="name@example.com" autocomplete="email"></app-auth-inputs>
        <app-auth-btn [isLoading]="isLoading()" [formInvalid]="forgotForm.invalid" [buttonText]="'Send Reset Link'" [loadingText]="'Sending...'"></app-auth-btn>
      </form>

      <app-back-link route="/login" text="Back to log in"></app-back-link>

    </div>
    }

    <!-- === STATE 2: SUCCESS === -->
    @else {
    <div class="card-content success-view fade-in">

      <div class="text-header">
        <app-logo-initial initial="âœ‰ï¸"></app-logo-initial>
        <h2>Check your mail</h2>
        <app-typografie [text]="'We have sent a password recover link to'" size="small" color="grey" align="center"></app-typografie>
        <app-typografie [text]="forgotForm.value.email" size="small" [weight]="500" color="white" align="center"></app-typografie>
      </div>

      <div class="help-box">
        <app-typografie [text]="'Did not receive the email? <br> Check your spam filter or'" size="small" color="white" align="center"></app-typografie>
        <button class="btn-link" (click)="retry()">try another email address</button>
      </div>

      <app-back-link route="/login" text="Skip, I'll confirm later"></app-back-link>

    </div>
    }

  </div>
</div>
