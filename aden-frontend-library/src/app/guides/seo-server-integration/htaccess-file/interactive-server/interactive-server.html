<section class="demo-section">

  <div class="simulator-wrapper">

    <!-- Controls -->
    <div class="server-controls">
    <div class="toggle-switch" (click)="toggleConfig()" [class.active]="configEnabled">
      <div class="knob"></div>
      <span class="label">{{ configEnabled ? '.htaccess Active' : 'No Config (Default)' }}</span>
    </div>

    <div class="url-input-group">
      <span class="domain">example.com</span>
      <input type="text" [(ngModel)]="currentPath" placeholder="/route" (keydown.enter)="simulateRequest()">
      <button class="aden-btn" (click)="simulateRequest()">GO</button>
    </div>
    </div>

    <!-- Server Terminal / Output -->
    <div class="terminal-window">
    <div class="terminal-header">
      <div class="dots"><span></span><span></span><span></span></div>
      <span>Apache Access Log</span>
    </div>

    <div class="terminal-body">
      @if (serverLog.length === 0) {
      <div class="placeholder">Waiting for request...</div>
      }

      @for (log of serverLog; track $index) {
      <div class="log-line">> {{ log }}</div>
      }

      @if (responseStatus !== null) {
      <div class="result-box" [class.success]="responseStatus === 200" [class.error]="responseStatus === 404">
      <div class="status-code">{{ responseStatus }}</div>
      <div class="status-text">
        @if (responseStatus === 200) {
        <strong>OK</strong> - Serving: {{ responseFile }}
        } @else {
        <strong>Not Found</strong> - Server gave up.
        }
      </div>
      </div>

      @if (responseStatus === 200 && !responseFile.includes('.')) {
      <!-- Note on successful rewrite -->
      <div class="angular-hint">ðŸš€ Angular Router takes over from here!</div>
      }
      }
    </div>
    </div>

  </div>
  </section>
